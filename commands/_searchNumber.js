/*CMD
  command: /searchNumber
  help: 
  need_reply: false
  auto_retry_time: 
  folder: 

  <<ANSWER

  ANSWER

  <<KEYBOARD

  KEYBOARD
  aliases: 
  group: 
CMD*/

//Bot.inspect(JSON.parse(content))
/*
var ban = Bot.getProperty(user.telegramid)

if (ban === "Ban") {
  var banText = "<i>ğŸš« You're banned.</i>"

  Api.sendMessage({
    text: banText,
    parse_mode: "html"
  })
  return
}

var maintenanceStatus = Bot.getProperty("maintenanceStatus")

if (maintenanceStatus === "On") {
  var onText =
    "<i>ğŸ› ï¸ Bot is under maintenance, please come back after some time.</i>"

  Api.sendMessage({
    text: onText,
    parse_mode: "html"
  })
  return
}

if (!content) {
  return
}

try {
  var prompt = JSON.parse(content)
  var data = prompt.data[0]
  var image = data.image
  var name = data.name
  var gender = data.gender
  var number = data.phones[0].e164Format
  var numberType = data.phones[0].numberType
  var carrier = data.phones[0].carrier
  var type = data.phones[0].type
  var country = data.addresses[0].address
  var state = data.addresses[0].city
  var timeZone = data.addresses[0].timeZone
  var email = data.internetAddresses[0].id
  var botLink = "@" + bot.name
  var text =
    "<b>ğŸ™‹ Name : " +
    name +
    "\nğŸ‘« Gender : " +
    gender +
    "\n\nğŸ“ Number : " +
    number +
    "\nğŸ‘‰ Number type : " +
    numberType +
    "\nğŸ“± Carrier : " +
    carrier +
    "\nğŸ’» Type : " +
    type +
    "\n\nğŸš© Country : " +
    country +
    "\nğŸ” State : " +
    state +
    "\nâŒš Time zone : " +
    timeZone +
    "\n\nğŸ›¡ï¸ Email : " +
    email +
    "\n\nâ„¹ï¸ Information generated by : " +
    botLink +
    "</b>"

  if (image === undefined) {
    Api.sendMessage({
      text: text,
      parse_mode: "html"
    })

    Bot.runCommand("/mainMenu")

    var userName = user.first_name
    var username = "@" + user.username
    var userID = user.telegramid
    var adminText =
      "<b>ğŸ†• New number searched\n\nğŸ§’ By : " +
      userName +
      "\nğŸ‘‰ Username : " +
      username +
      "\nğŸ†” User ID :</b> <code>" +
      userID +
      "</code>\n\nâ–â–â–â–â–â–â–â–â–â–\n\n" +
      text
    var admin = Bot.getProperty("admin")

    Api.sendMessage({
      chat_id: admin,
      text: adminText,
      parse_mode: "html"
    })
  } else {
    Api.sendPhoto({
      photo: image,
      caption: text,
      parse_mode: "html"
    })

    Bot.runCommand("/mainMenu")

    var userName = user.first_name
    var username = "@" + user.username
    var userID = user.telegramid
    var adminText =
      "<b>ğŸ†• New number searched\n\nğŸ§’ By : " +
      userName +
      "\nğŸ‘‰ Username : " +
      username +
      "\nğŸ†” User ID :</b> <code>" +
      userID +
      "</code>\n\nâ–â–â–â–â–â–â–â–â–â–\n\n" +
      text
    var admin = Bot.getProperty("admin")

    Api.sendMessage({
      chat_id: admin,
      text: adminText,
      parse_mode: "html"
    })
  }
} catch (error) {
  //var error = prompt.message.split(".")
  //var noURL = error[0]
  //var errorText = "<b>Error occured :</b>\n<i>" + noURL + "</i>"

  Api.sendMessage({
    text: error,
    parse_mode: "html"
  })

  Bot.runCommand("/mainMenu")
}
*/

//Bot.inspect(JSON.parse(content));

try {
  const data = JSON.parse(content);
  const number = data.number;
  const localFormat = data.local_format;
  const internationalFormat = data.international_format;
  const countryPrefix = data.country_prefix;
  const countryCode = data.country_code;
  const countryName = data.country_name;
  const location = data.location;
  const carrier = data.carrier;
  const lineType = data.line_type;
  const text = `<b>Â» Number :</b> <code>${number}</code>\n<b>Â» Local format :</b> <code>${localFormat}</code>\n<b>Â» International format :</b> <code>${internationalFormat}</code>\n<b>Â» Country prefix :</b> <code>${countryPrefix}</code>\n<b>Â» Country code :</b> <code>${countryCode}</code>\n<b>Â» Country name :</b> <code>${countryName}</code>\n<b>Â» Location :</b> <code>${location}</code>\n<b>Â» Carrier :</b> <code>${carrier}</code>\n<b>Â» Line type :</b> <code>${lineType}</code>\n\n<b>â„¹ï¸ Information generated by : @${bot.name}</b>`;
  
  Api.sendMessage({
    text: `<b>ğŸ” Your search results -</b>\n\n${text}`,
    parse_mode: "html"
  });
  
  Bot.runCommand("/mainMenu");
  
  Api.sendMessage({
    chat_id: Bot.getProperty("admin"),
    text: `<b>ğŸ” New number searched\n\nÂ» By : ${user.first_name}\nÂ» Username : @${user.username ? user.username : " Unknown"}\nÂ» User link : <a href="tg://user?id=${user.telegramid}">User link</a>\nÂ» User ID :</b> <code>${user.telegramid}</code>\n\n${text}`,
    parse_mode: "html"
  });
} catch (error) {
  Api.sendMessage({
    text: `<b>âš ï¸ Error :</b> <i>${error}</i>`,
    parse_mode: "html"
  });
}
